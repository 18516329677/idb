<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Test Execution · idb</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="&lt;p&gt;Test execution is a well-supported feature of &lt;code&gt;idb&lt;/code&gt;. Supporting &lt;code&gt;xctest run&lt;/code&gt; as a primitive means that &lt;code&gt;idb&lt;/code&gt; can be used in automated scenarios such as continuous integration or IDEs.&lt;/p&gt;
"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Test Execution · idb"/><meta property="og:type" content="website"/><meta property="og:url" content="https://fbidb.io/"/><meta property="og:description" content="&lt;p&gt;Test execution is a well-supported feature of &lt;code&gt;idb&lt;/code&gt;. Supporting &lt;code&gt;xctest run&lt;/code&gt; as a primitive means that &lt;code&gt;idb&lt;/code&gt; can be used in automated scenarios such as continuous integration or IDEs.&lt;/p&gt;
"/><meta property="og:image" content="https://fbidb.io/img/idb_Logo_Color.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://fbidb.io/img/idb_Logo_Color.png"/><link rel="shortcut icon" href="/img/idb_Logo_Color.png"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><h2 class="headerTitle">idb</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/docs/overview" target="_self">Getting Started</a></li><li class="siteNavGroupActive"><a href="/docs/installation" target="_self">Docs</a></li><li class=""><a href="https://github.com/facebook/idb" target="_self">GitHub</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>Contents</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Contents</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/overview">idb</a></li><li class="navListItem"><a class="navItem" href="/docs/installation">Installation</a></li><li class="navListItem"><a class="navItem" href="/docs/guided-tour">Guided Tour</a></li><li class="navListItem"><a class="navItem" href="/docs/architecture">Architecture</a></li><li class="navListItem"><a class="navItem" href="/docs/commands">Commands</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/docs/test_execution">Test Execution</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              const headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                if (event.target.tagName === 'A') {
                  document.body.classList.remove('tocActive');
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 class="postHeaderTitle">Test Execution</h1></header><article><div><span><p>Test execution is a well-supported feature of <code>idb</code>. Supporting <code>xctest run</code> as a primitive means that <code>idb</code> can be used in automated scenarios such as continuous integration or IDEs.</p>
<p>There are three areas that <code>idb</code> aims to solve on top of Xcode and <code>xcodebuild</code>:</p>
<ol>
<li>Structured Output. <code>idb</code> will output machine readable output when using the <code>--json</code> flag. This is often required for CI systems. <code>xcodebuild</code> now supports the <code>-resultBundlePath</code> flag, which outputs a plist upon completion, but <code>idb</code> also exposes streaming output and can support custom reporters.</li>
<li>Build Once, Run Many, Run Repeated. <code>xcodebuild</code> currently supports &quot;Run Many&quot; with the <code>test-without-building</code> command. However, this imposes more of a burden on the user than is necessary. In many cases <code>idb</code> supports building a singular <code>.xctest</code> bundle and <code>xctest install</code>ing this. This makes it easier to distribute test bundles against many runtimes and also run the same test bundle with a different runtime environment. For example, <code>idb</code> can run the same bundle with different environment variables, without modifying the build output. This makes it ideal for parameterizing the same test bundle with different data inputs. Or running the same test bundle in an Application or Logic Test context.</li>
<li>Listing of Tests. Given an installed test bundle <code>idb</code> also supports listing of tests within a bundle. This means that the user can peek at what tests cases are in a bundle without parsing sources using <code>xctest list</code></li>
<li>Faster test execution environments. &quot;Logic Test&quot; execution is an optimization that <code>idb</code> can use in a Simulator environment. This means that a test can execute much faster by not being injected into a full Application context. If test bundles are fast to execute, <code>idb</code> doesn't impose a cost of launching an Application.</li>
</ol>
<h2><a class="anchor" aria-hidden="true" id="installation-of-test-bundles"></a><a href="#installation-of-test-bundles" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Installation of Test Bundles</h2>
<p>Since iOS Runtimes may be remote from the machine that is executing <code>idb</code> commands, <code>idb</code> needs to support the concept of <code>installation</code>. This is essentially copying across the test bundle artifacts alongside the runtime using <code>xctest install</code>.</p>
<p>By doing so, the idb companion backend then has the test bundle binary to execute against when using <code>xctest run</code>. These bundles are also persisted, which makes caching of test bundles more feasible.</p>
<p>The follwing shows the installation of a test bundle, listing the available bundles, then the test cases within a installed bundle:</p>
<pre><code class="hljs">$ <span class="hljs-string">idb </span><span class="hljs-string">xctest </span><span class="hljs-string">install </span><span class="hljs-string">Fixtures/</span><span class="hljs-string">Binaries/</span><span class="hljs-string">iOSUnitTestFixture.</span><span class="hljs-string">xctest
</span><span class="hljs-string">Installed:</span> <span class="hljs-string">com.</span><span class="hljs-string">facebook.</span><span class="hljs-string">iOSUnitTestFixture
</span>$ <span class="hljs-string">idb </span><span class="hljs-string">xctest </span><span class="hljs-string">list
</span><span class="hljs-string">com.</span><span class="hljs-string">facebook.</span><span class="hljs-string">iOSUnitTestFixture </span>| <span class="hljs-string">iOSUnitTestFixture </span>| <span class="hljs-string">x86_64,</span> <span class="hljs-string">i386
</span>$ <span class="hljs-string">idb </span><span class="hljs-string">xctest </span><span class="hljs-built_in">list-bundle</span> <span class="hljs-string">com.</span><span class="hljs-string">facebook.</span><span class="hljs-string">iOSUnitTestFixture
</span><span class="hljs-string">iOSUnitTestFixtureTests/</span><span class="hljs-string">testHostProcessIsMobileSafari
</span><span class="hljs-string">iOSUnitTestFixtureTests/</span><span class="hljs-string">testHostProcessIsXctest
</span><span class="hljs-string">iOSUnitTestFixtureTests/</span><span class="hljs-string">testIsRunningInIOSApp
</span><span class="hljs-string">iOSUnitTestFixtureTests/</span><span class="hljs-string">testIsRunningInMacOSXApp
</span><span class="hljs-string">iOSUnitTestFixtureTests/</span><span class="hljs-string">testIsRunningOnIOS
</span><span class="hljs-string">iOSUnitTestFixtureTests/</span><span class="hljs-string">testIsRunningOnMacOSX
</span><span class="hljs-string">iOSUnitTestFixtureTests/</span><span class="hljs-string">testPossibleCrashingOfHostProcess
</span><span class="hljs-string">iOSUnitTestFixtureTests/</span><span class="hljs-string">testPossibleStallingOfHostProcess
</span><span class="hljs-string">iOSUnitTestFixtureTests/</span><span class="hljs-string">testWillAlwaysFail
</span><span class="hljs-string">iOSUnitTestFixtureTests/</span><span class="hljs-string">testWillAlwaysPass
</span></code></pre>
<p>This makes the process of <code>xctest</code> management a lot more similar to app management. Using a given test bundle, it's then trivial to execute tests against it</p>
<pre><code class="hljs">$ idb xctest <span class="hljs-built_in">run</span> logic --json com.facebook.iOSUnitTestFixture                                                                                                                                                                                                                         
{<span class="hljs-string">"bundleName"</span>: <span class="hljs-string">"iOSUnitTestFixtureTests"</span>, <span class="hljs-string">"className"</span>: <span class="hljs-string">"iOSUnitTestFixtureTests"</span>, <span class="hljs-string">"methodName"</span>: <span class="hljs-string">"testHostProcessIsMobileSafari"</span>, <span class="hljs-string">"logs"</span>: [], <span class="hljs-string">"duration"</span>: <span class="hljs-number">0.22353005409240723</span>, <span class="hljs-string">"passed"</span>: <span class="hljs-literal">false</span>, <span class="hljs-string">"crashed"</span>: <span class="hljs-literal">false</span>, <span class="hljs-string">"failureInfo"</span>: {<span class="hljs-string">"message"</span>: <span class="hljs-string">"(([NSProcessInfo.processInfo.processName isEqualToString:@\"</span>MobileSafari\<span class="hljs-string">"]) is true) failed"</span>, <span class="hljs-string">"file"</span>: <span class="hljs-string">"/repo_root/iOSUnitTestFixture/iOSUnitTestFixtureTests.m"</span>, <span class="hljs-string">"line"</span>: <span class="hljs-number">50</span>}, <span class="hljs-string">"activityLogs"</span>: []}
{<span class="hljs-string">"bundleName"</span>: <span class="hljs-string">"iOSUnitTestFixtureTests"</span>, <span class="hljs-string">"className"</span>: <span class="hljs-string">"iOSUnitTestFixtureTests"</span>, <span class="hljs-string">"methodName"</span>: <span class="hljs-string">"testHostProcessIsXctest"</span>, <span class="hljs-string">"logs"</span>: [], <span class="hljs-string">"duration"</span>: <span class="hljs-number">0.0002950429916381837</span>, <span class="hljs-string">"passed"</span>: <span class="hljs-literal">true</span>, <span class="hljs-string">"crashed"</span>: <span class="hljs-literal">false</span>, <span class="hljs-string">"failureInfo"</span>: <span class="hljs-literal">null</span>, <span class="hljs-string">"activityLogs"</span>: []}
{<span class="hljs-string">"bundleName"</span>: <span class="hljs-string">"iOSUnitTestFixtureTests"</span>, <span class="hljs-string">"className"</span>: <span class="hljs-string">"iOSUnitTestFixtureTests"</span>, <span class="hljs-string">"methodName"</span>: <span class="hljs-string">"testIsRunningInIOSApp"</span>, <span class="hljs-string">"logs"</span>: [], <span class="hljs-string">"duration"</span>: <span class="hljs-number">0.0003999471664428711</span>, <span class="hljs-string">"passed"</span>: <span class="hljs-literal">false</span>, <span class="hljs-string">"crashed"</span>: <span class="hljs-literal">false</span>, <span class="hljs-string">"failureInfo"</span>: {<span class="hljs-string">"message"</span>: <span class="hljs-string">"(([NSClassFromString(@\"</span>UIApplication\<span class="hljs-string">") performSelector:@selector(sharedApplication)]) != nil) failed"</span>, <span class="hljs-string">"file"</span>: <span class="hljs-string">"/repo_root/iOSUnitTestFixture/iOSUnitTestFixtureTests.m"</span>, <span class="hljs-string">"line"</span>: <span class="hljs-number">30</span>}, <span class="hljs-string">"activityLogs"</span>: []}
{<span class="hljs-string">"bundleName"</span>: <span class="hljs-string">"iOSUnitTestFixtureTests"</span>, <span class="hljs-string">"className"</span>: <span class="hljs-string">"iOSUnitTestFixtureTests"</span>, <span class="hljs-string">"methodName"</span>: <span class="hljs-string">"testIsRunningInMacOSXApp"</span>, <span class="hljs-string">"logs"</span>: [], <span class="hljs-string">"duration"</span>: <span class="hljs-number">0.00030100345611572255</span>, <span class="hljs-string">"passed"</span>: <span class="hljs-literal">false</span>, <span class="hljs-string">"crashed"</span>: <span class="hljs-literal">false</span>, <span class="hljs-string">"failureInfo"</span>: {<span class="hljs-string">"message"</span>: <span class="hljs-string">"(([NSClassFromString(@\"</span>NSApplication\<span class="hljs-string">") performSelector:@selector(sharedApplication)]) != nil) failed"</span>, <span class="hljs-string">"file"</span>: <span class="hljs-string">"/repo_root/iOSUnitTestFixture/iOSUnitTestFixtureTests.m"</span>, <span class="hljs-string">"line"</span>: <span class="hljs-number">40</span>}, <span class="hljs-string">"activityLogs"</span>: []}
{<span class="hljs-string">"bundleName"</span>: <span class="hljs-string">"iOSUnitTestFixtureTests"</span>, <span class="hljs-string">"className"</span>: <span class="hljs-string">"iOSUnitTestFixtureTests"</span>, <span class="hljs-string">"methodName"</span>: <span class="hljs-string">"testIsRunningOnIOS"</span>, <span class="hljs-string">"logs"</span>: [], <span class="hljs-string">"duration"</span>: <span class="hljs-number">0.0002809762954711914</span>, <span class="hljs-string">"passed"</span>: <span class="hljs-literal">true</span>, <span class="hljs-string">"crashed"</span>: <span class="hljs-literal">false</span>, <span class="hljs-string">"failureInfo"</span>: <span class="hljs-literal">null</span>, <span class="hljs-string">"activityLogs"</span>: []}
{<span class="hljs-string">"bundleName"</span>: <span class="hljs-string">"iOSUnitTestFixtureTests"</span>, <span class="hljs-string">"className"</span>: <span class="hljs-string">"iOSUnitTestFixtureTests"</span>, <span class="hljs-string">"methodName"</span>: <span class="hljs-string">"testIsRunningOnMacOSX"</span>, <span class="hljs-string">"logs"</span>: [], <span class="hljs-string">"duration"</span>: <span class="hljs-number">0.0003479719161987306</span>, <span class="hljs-string">"passed"</span>: <span class="hljs-literal">false</span>, <span class="hljs-string">"crashed"</span>: <span class="hljs-literal">false</span>, <span class="hljs-string">"failureInfo"</span>: {<span class="hljs-string">"message"</span>: <span class="hljs-string">"((NSClassFromString(@\"</span>NSView\<span class="hljs-string">")) != nil) failed"</span>, <span class="hljs-string">"file"</span>: <span class="hljs-string">"/repo_root/iOSUnitTestFixture/iOSUnitTestFixtureTests.m"</span>, <span class="hljs-string">"line"</span>: <span class="hljs-number">35</span>}, <span class="hljs-string">"activityLogs"</span>: []}
{<span class="hljs-string">"bundleName"</span>: <span class="hljs-string">"iOSUnitTestFixtureTests"</span>, <span class="hljs-string">"className"</span>: <span class="hljs-string">"iOSUnitTestFixtureTests"</span>, <span class="hljs-string">"methodName"</span>: <span class="hljs-string">"testPossibleCrashingOfHostProcess"</span>, <span class="hljs-string">"logs"</span>: [], <span class="hljs-string">"duration"</span>: <span class="hljs-number">0.0003750324249267579</span>, <span class="hljs-string">"passed"</span>: <span class="hljs-literal">true</span>, <span class="hljs-string">"crashed"</span>: <span class="hljs-literal">false</span>, <span class="hljs-string">"failureInfo"</span>: <span class="hljs-literal">null</span>, <span class="hljs-string">"activityLogs"</span>: []}
{<span class="hljs-string">"bundleName"</span>: <span class="hljs-string">"iOSUnitTestFixtureTests"</span>, <span class="hljs-string">"className"</span>: <span class="hljs-string">"iOSUnitTestFixtureTests"</span>, <span class="hljs-string">"methodName"</span>: <span class="hljs-string">"testPossibleStallingOfHostProcess"</span>, <span class="hljs-string">"logs"</span>: [], <span class="hljs-string">"duration"</span>: <span class="hljs-number">0.00037300586700439453</span>, <span class="hljs-string">"passed"</span>: <span class="hljs-literal">true</span>, <span class="hljs-string">"crashed"</span>: <span class="hljs-literal">false</span>, <span class="hljs-string">"failureInfo"</span>: <span class="hljs-literal">null</span>, <span class="hljs-string">"activityLogs"</span>: []}
{<span class="hljs-string">"bundleName"</span>: <span class="hljs-string">"iOSUnitTestFixtureTests"</span>, <span class="hljs-string">"className"</span>: <span class="hljs-string">"iOSUnitTestFixtureTests"</span>, <span class="hljs-string">"methodName"</span>: <span class="hljs-string">"testWillAlwaysFail"</span>, <span class="hljs-string">"logs"</span>: [], <span class="hljs-string">"duration"</span>: <span class="hljs-number">0.0002980232238769531</span>, <span class="hljs-string">"passed"</span>: <span class="hljs-literal">false</span>, <span class="hljs-string">"crashed"</span>: <span class="hljs-literal">false</span>, <span class="hljs-string">"failureInfo"</span>: {<span class="hljs-string">"message"</span>: <span class="hljs-string">"failed - This always fails"</span>, <span class="hljs-string">"file"</span>: <span class="hljs-string">"/repo_root/iOSUnitTestFixture/iOSUnitTestFixtureTests.m"</span>, <span class="hljs-string">"line"</span>: <span class="hljs-number">76</span>}, <span class="hljs-string">"activityLogs"</span>: []}
{<span class="hljs-string">"bundleName"</span>: <span class="hljs-string">"iOSUnitTestFixtureTests"</span>, <span class="hljs-string">"className"</span>: <span class="hljs-string">"iOSUnitTestFixtureTests"</span>, <span class="hljs-string">"methodName"</span>: <span class="hljs-string">"testWillAlwaysPass"</span>, <span class="hljs-string">"logs"</span>: [], <span class="hljs-string">"duration"</span>: <span class="hljs-number">0.00024402141571044914</span>, <span class="hljs-string">"passed"</span>: <span class="hljs-literal">true</span>, <span class="hljs-string">"crashed"</span>: <span class="hljs-literal">false</span>, <span class="hljs-string">"failureInfo"</span>: <span class="hljs-literal">null</span>, <span class="hljs-string">"activityLogs"</span>: []}
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="what-is-a-test-bundle"></a><a href="#what-is-a-test-bundle" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>What is a Test Bundle?</h2>
<p>An <code>xctest</code> bundle is fundamentally a Dynamically Linked Framework that contains executable test code.</p>
<p><code>xctest</code> bundles are loaded at runtime by the process that they are being injected into, just like a plugin or shim. The dynamic library within the <code>.xctest</code> bundle links with <a href="https://developer.apple.com/documentation/xctest"><code>XCTest.framework</code></a> and can also link with other System-Level Frameworks, or code that is statically linked inside the test bundle.</p>
<p>Since these bundles aren't substantially different to any other Framework or dynamic library, they can be relocated onto another machine, or amongst many iOS runtimes on the current machine.</p>
<h2><a class="anchor" aria-hidden="true" id="ios-simulators"></a><a href="#ios-simulators" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>iOS Simulators</h2>
<p>Simulators are a common place to execute test bundles, especially when testing unit or integration level functionality that may not have dependencies on running a physical device.</p>
<p>The performance differences between a Simulator and Device are also less relevant if you only care about correctness. Simulators are often easier to manage within a CI environment.</p>
<p>There are a number of test execution environments that <code>idb</code> supports:</p>
<h3><a class="anchor" aria-hidden="true" id="logic-tests-idb-xctest-run-logic"></a><a href="#logic-tests-idb-xctest-run-logic" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Logic Tests: <code>idb xctest run logic</code></h3>
<p>A Test Bundle that can run in the context of any process, typically used for Unit Tests. These kinds of <code>xctest</code> bundles do not typically require a specific host Application as all code-under-test.</p>
<p>Like all <code>xctest</code> bundles, they can dynamically link the code-under-test at runtime, or statically links the tested code inside the Test Bundle's dynamic library.</p>
<p>Logic tests are typically injected into a small host process like the <code>xctest</code> commandline. macOS has a <code>xctest</code> commandline at <code>/usr/bin/xctest/</code>, the iOS Simulator <code>xctest</code> executable is located at <code>$DEVELOPER_DIR/Platforms/iPhoneSimulator.platform/Developer/Library/Xcode/Agents/xctest</code>.</p>
<p>The <code>xctest</code> commandline will load the <code>xctest</code> bundle provided as an argument and run tests according to the arguments, or from an <code>XCTestConfigurationFilePath</code> provided as an environment variable passed to the process.</p>
<p><code>idb</code> then injects a shim into the <code>xctest</code> process and hooks calls to <code>XCTest.framework</code> methods. This is then used to report results back to <code>idb</code>. This communication happens via a FIFO, passed into the spawned <code>xctest</code> process.</p>
<p>This is not a mode of execution that is supported by Xcode &amp; <code>xcodebuild</code>. However, if you're wanting to optimize the performance of your test executions, for instance to get faster signal on code changes, then this is a worthy optimization. The main reason for not using &quot;Logic Tests&quot; is if the Test code or the code-under-test requires an application context, for instance if it's using <code>UIApplication</code>. As such, Logic Tests are often well suited to business or domain logic that doesn't depend on much more than Foundation, or your own libraries.</p>
<h3><a class="anchor" aria-hidden="true" id="application-tests-idb-xctest-run-app"></a><a href="#application-tests-idb-xctest-run-app" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Application Tests: <code>idb xctest run app</code></h3>
<p>Application Tests are similar to Logic Tests, but they run inside an iOS App Host Process. This is typically used for Unit &amp; Integration tests that depend on an Application's code, or running inside the context of an Application.</p>
<p>These tests can manipulate the UI within an Application, depend certain behaviours of <code>UIKit</code>, or interact with the Application Delegate. They require a little more work to bootstrap, because of the arbitration between <code>idb</code> and the host process.</p>
<p><code>idb</code> uses <code>XCTestBootstrap</code> which understands how to perform this arbitration and translate delegate callbacks into machine-readable output.</p>
<h3><a class="anchor" aria-hidden="true" id="ui-tests-idb-xctest-run-ui"></a><a href="#ui-tests-idb-xctest-run-ui" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>UI Tests: <code>idb xctest run ui</code></h3>
<p>In Xcode 7, Apple deprecated <code>UIAutomation</code> and replaced it with UI Testing support inside the <code>XCTest</code> framework itself. This means that UI Tests have a similar execution model to Application Tests, by injecting into an Application Process.</p>
<p>As part of the security model of running these tests, the Test Bundle cannot manipulate the User Interface un-aided. The bundle running inside the Application process co-ordinates with Xcode via a daemon process called <code>testmanagerd</code>.</p>
<p>This mediated connection between the injected Application process and IDE Host also allows for <a href="https://github.com/facebook/FBSimulatorControl/blob/master/PrivateHeaders/XCTest/XCTestManager_IDEInterface-Protocol.h">test results to be delivered across a delegate protocol to the IDE Host</a>.</p>
<h2><a class="anchor" aria-hidden="true" id="idb-and-shims"></a><a href="#idb-and-shims" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>idb</code> and Shims</h2>
<p>In order for <code>idb</code> to extract structured output from a test process, it uses a &quot;Shim&quot;; a dynamically linked library that can interpose some of the functionality of <code>XCTest.framework</code>.</p>
<p>The default installation instructions for <code>idb</code> will create shims for you. If you're re-locating the <code>idb_companion</code> you should take a <a href="https://github.com/facebook/idb/blob/master/XCTestBootstrap/Configuration/FBXCTestShimConfiguration.m">look at this class</a>, which describes how <code>idb</code> finds these binaries.</p>
<h2><a class="anchor" aria-hidden="true" id="what-about-fbxctest"></a><a href="#what-about-fbxctest" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>What about <code>fbxctest</code>?</h2>
<p><code>fbxctest</code> was built as a drop-in replacement for <code>xctool</code> before it. <code>idb</code> doesn't have the same command-line interface for test execution, so you will need to invoke <code>idb</code> differently to use it.</p>
<p><code>fbxctest</code> will remain around for the foreseeable future, as both <code>idb</code> and <code>fbxctest</code> depend on the same underlying <code>XCTestBootstrap</code> Framework. <code>fbxctest</code> may be deprecated in the future.</p>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/commands"><span class="arrow-prev">← </span><span>Commands</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#installation-of-test-bundles">Installation of Test Bundles</a></li><li><a href="#what-is-a-test-bundle">What is a Test Bundle?</a></li><li><a href="#ios-simulators">iOS Simulators</a><ul class="toc-headings"><li><a href="#logic-tests-idb-xctest-run-logic">Logic Tests: <code>idb xctest run logic</code></a></li><li><a href="#application-tests-idb-xctest-run-app">Application Tests: <code>idb xctest run app</code></a></li><li><a href="#ui-tests-idb-xctest-run-ui">UI Tests: <code>idb xctest run ui</code></a></li></ul></li><li><a href="#idb-and-shims"><code>idb</code> and Shims</a></li><li><a href="#what-about-fbxctest">What about <code>fbxctest</code>?</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="https://code.facebook.com/projects/" target="_blank" class="fbOpenSource"><img src="/img/oss_logo.png" alt="Facebook Open Source" width="170" height="45"/></a><a href="https://code.facebook.com/projects/" target="_blank">Open Source Projects</a><a href="https://github.com/facebook/" target="_blank">Github</a><a href="https://twitter.com/fbOpenSource" target="_blank">Twitter</a><a target="_blank">Contribute to idb</a></section></footer></div></body></html>